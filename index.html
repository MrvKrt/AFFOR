<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>AFFOR Project – National Afforestation Model</title>
        <link rel="stylesheet" href="style.css" />
      </head>
      
<body>

  <header>
    <h1>AFFOR – National Afforestation Model</h1>
    <p>Evaluating the economic, carbon, and biodiversity outcomes of afforestation in Ireland</p>
  </header>
  <div class="logo-row">
    <img src="logo.png" alt="AFFOR Logo" />
    <img src="Picture1.png" alt="Partner 1" />
    <img src="Picture2.png" alt="Partner 2" />
  </div>
  
  <nav>
    <ul>
      <li><a href="#overview">Overview</a></li>
      <li><a href="#objectives">Objectives</a></li>
      <li><a href="#project-outputs">Outputs</a></li>
    </ul>
  </nav>

  <main>

    <section id="overview">
        <h2>Project Overview</h2>
      
        <p>
          The AFFOR Project – National Afforestation Model – develops an integrated analytical framework to evaluate the economic, environmental, and social impacts of converting Irish agricultural land to forestry. Funded by the Environmental Protection Agency (EPA) under its 2021–2030 Research Programme, the project supports national and EU-level climate and biodiversity goals, including Ireland's Climate Action Plan and the EU Green Deal.
        </p>
      
        <p>
          By combining farm-level bioeconomic models with carbon and biodiversity metrics, the project assesses the trade-offs and synergies of afforestation across soil types, farm systems, and tree species. The model simulates outcomes under multiple scenarios, accounting for carbon sequestration, biodiversity shifts, and economic returns for both private landowners and society.
        </p>
      
        <p>
          The AFFOR model links detailed farm data (from the Teagasc National Farm Survey) with forest growth models, Delphi-elicited biodiversity values, and a novel value-chain Input-Output module. These tools allow policymakers to explore how afforestation incentives, species selection, and land characteristics influence net carbon, biodiversity, income, and rural employment across Ireland.
        </p>
      </section>
      <section id="objectives">
        <h2>Objectives</h2>
        <p>
          The main objective of AFFOR is to create a single, scalable modelling framework that integrates farm-level decisions, forest carbon dynamics, biodiversity change, and national policy outcomes. It addresses:
        </p>
        <ul>
          <li>Modelling economic trade-offs between forestry and agriculture at farm and national scale</li>
          <li>Capturing biodiversity changes across land use transitions using expert surveys</li>
          <li>Estimating carbon sequestration and displacement using life-cycle approaches</li>
          <li>Developing open-source tools and training materials for stakeholders</li>
          <li>Supporting policy evaluation under Food Vision 2030, Climate Action Plan, and EU Green Deal</li>
        </ul>
      </section>
      
      <section id="carbon-impact" class="section">
        <div class="section-head">
          <h2>Carbon and Climate Impact</h2>
          <p class="lead">
            Afforestation is a key pathway for Ireland to meet its climate goals. The AFFOR model shows that new forests
            capture carbon in trees, soils, and harvested wood products—and also reduce emissions by displacing livestock
            activity (the “double carbon dividend”). 
          </p>
        </div>
      
        <div class="layout">
          <!-- Left: Interactive cards -->
          <div class="cards" role="list">
            <button class="card" role="listitem" data-key="trees" aria-controls="detail" aria-expanded="false">
              <span class="icon" aria-hidden="true">
                <!-- pine svg -->
                <svg viewBox="0 0 24 24"><path d="M12 2l5 7h-3l4 6h-3l3 5H6l3-5H6l4-6H7l5-7zM11 22v-2h2v2h-2z"/></svg>
              </span>
              <span class="title">Trees</span>
              <span class="blurb">Rapid uptake during growth; strongest for Sitka spruce.</span>
            </button>
      
            <button class="card" role="listitem" data-key="soils" aria-controls="detail" aria-expanded="false">
              <span class="icon" aria-hidden="true">
                <!-- globe svg -->
                <svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm-1 2.1C8.7 4.5 6.9 6.9 6.4 10H11V4.1zM6.4 14c.5 3.1 2.3 5.5 4.6 5.9V14H6.4zM13 19.9c2.3-.4 4.1-2.8 4.6-5.9H13v5.9zM17.6 10c-.5-3.1-2.3-5.5-4.6-5.9V10h4.6z"/></svg>
              </span>
              <span class="title">Soils</span>
              <span class="blurb">Forest soils build organic matter & long-lived carbon.</span>
            </button>
      
            <button class="card" role="listitem" data-key="wood" aria-controls="detail" aria-expanded="false">
              <span class="icon" aria-hidden="true">
                <!-- log svg -->
                <svg viewBox="0 0 24 24"><path d="M3 12a6 6 0 0012 0V7H9a6 6 0 00-6 5zM15 7h2a4 4 0 010 8h-2V7z"/></svg>
              </span>
              <span class="title">Wood Products</span>
              <span class="blurb">Harvested Wood Products (HWP) store carbon for decades.</span>
            </button>
      
            <button class="card" role="listitem" data-key="avoided" aria-controls="detail" aria-expanded="false">
              <span class="icon" aria-hidden="true">
                <!-- cow → X svg -->
                <svg viewBox="0 0 24 24"><path d="M4 8h10l2 3h4v2h-2l-1 3h-3v3h-2v-3H8v3H6v-3H5l-1-3H2v-2h2l0-3zM8 11h6"/></svg>
              </span>
              <span class="title">Avoided Emissions</span>
              <span class="blurb">Less livestock → lower CH₄ & N₂O from agriculture.</span>
            </button>
          </div>
      
          <!-- Right: Dynamic detail panel -->
          <aside id="detail" class="detail" aria-live="polite">
            <div class="placeholder">
              <p>Hover, focus or tap a card to learn more.</p>
            </div>
            <div class="content" hidden>
              <h3 id="detail-title"></h3>
              <p id="detail-text"></p>
              <ul id="detail-facts" class="facts"></ul>
            </div>
      
            <!-- Quick Facts (always visible) -->
            <div class="quickfacts">
              <h4>Quick facts (AFFOR)</h4>
              <ul>
                <li>Forestry privately outperforms agriculture on ~1/3 of farms; valuing carbon lifts positive social returns from ~47% at €32/tCO₂ to ~97% at €100/tCO₂. </li>
                <li>1 ha of unthinned Sitka spruce offsets ~3.97 livestock units (≈2.34–4.13 LU depending on soil). </li>
                <li>Sitka: highest carbon & timber; Birch/Oak: stronger biodiversity, especially after thinning. </li>
              </ul>
            </div>
          </aside>
        </div>
      </section>
      
      <style>
      /* ---- Design tokens ---- */
      #carbon-impact {
        --bg: #f7faf9;
        --card-bg: #eaf5ef;
        --card-bg-hover: #d6ede3;
        --ink: #0b2b1e;
        --muted: #4a5d55;
        --brand: #0e6b3a;
        --ring: #6bd3a3;
        --border: #b9d7c7;
        --shadow: 0 6px 18px rgba(3, 51, 30, .08);
        background: var(--bg);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: clamp(16px, 2vw, 28px);
        margin: 32px auto;
        max-width: 1100px;
        box-shadow: var(--shadow);
      }
      
      .section-head h2 {
        margin: 0 0 6px;
        color: var(--brand);
        letter-spacing: .2px;
      }
      .section-head .lead { color: var(--muted); margin: 0; }
      
      .layout {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
        margin-top: 18px;
      }
      @media (min-width: 900px) {
        .layout { grid-template-columns: 1fr 1fr; }
      }
      
      .cards {
        display: grid;
        grid-template-columns: repeat(2, minmax(0,1fr));
        gap: 14px;
      }
      @media (min-width: 540px) {
        .cards { grid-template-columns: repeat(2, minmax(0,1fr)); }
      }
      @media (min-width: 760px) {
        .cards { grid-template-columns: repeat(2, minmax(0,1fr)); }
      }
      
      .card {
        appearance: none;
        background: var(--card-bg);
        border: 1.5px solid var(--border);
        border-radius: 14px;
        padding: 16px;
        text-align: left;
        cursor: pointer;
        box-shadow: var(--shadow);
        display: grid;
        grid-template-columns: 44px 1fr;
        grid-template-rows: auto auto;
        gap: 6px 12px;
        align-items: center;
        transition: transform .18s ease, background .18s ease, border-color .18s ease, box-shadow .18s ease;
      }
      .card:focus-visible,
      .card:hover {
        background: var(--card-bg-hover);
        transform: translateY(-2px);
        outline: none;
        border-color: var(--ring);
        box-shadow: 0 0 0 3px color-mix(in oklab, var(--ring) 35%, white);
      }
      .card .icon { width: 44px; height: 44px; border-radius: 10px; display: grid; place-items: center; background:#fff; border:1px solid var(--border); }
      .card .icon svg { width: 24px; height: 24px; fill: var(--brand); }
      .card .title { font-weight: 700; color: var(--ink); }
      .card .blurb { grid-column: 2/3; color: var(--muted); font-size: .95rem; }
      
      .detail {
        background: #ffffff;
        border: 1.5px solid var(--border);
        border-radius: 14px;
        padding: 18px 18px 12px;
        box-shadow: var(--shadow);
        min-height: 220px;
      }
      .detail .placeholder { color: var(--muted); font-style: italic; }
      .detail h3 { margin: 0 0 6px; color: var(--ink); }
      .detail p { margin: 0 0 10px; color: var(--ink); }
      .facts { margin: 0; padding-left: 18px; color: var(--muted); }
      .facts li { margin: 4px 0; }
      
      .quickfacts { border-top: 1px dashed var(--border); margin-top: 14px; padding-top: 12px; }
      .quickfacts h4 { margin: 0 0 6px; color: var(--brand); }
      .quickfacts ul { margin: 0; padding-left: 18px; color: var(--muted); }
      .quickfacts li { margin: 6px 0; }
      </style>
      
      <script>
      const DETAIL = {
        trees: {
          title: "Trees",
          text:
            "Growing forests remove CO₂ from the atmosphere and store it in living biomass and dead organic matter. Sitka spruce shows the fastest early uptake, while native broadleaves add biodiversity value as stands mature.",
          facts: [
            "Spruce delivers the highest early carbon and timber yields.",
            "Broadleaves (Birch, Oak) catch up later in rotation and strengthen biodiversity, especially after thinning."
          ]
        },
        soils: {
          title: "Soils",
          text:
            "Forest soils accumulate organic matter and stabilize carbon over long periods. Soil class drives both growth and the climate effect, so species–soil matching matters for policy and advice.",
          facts: [
            "Productivity and carbon vary strongly by soil (brown earths, podzolics, gleys, peat).",
            "Heterogeneity is key—identical incentives can perform very differently by soil."
          ]
        },
        wood: {
          title: "Harvested Wood Products (HWP)",
          text:
            "Timber and panels continue to store part of the carbon after harvest. Including HWP gives a more complete and policy-relevant climate picture.",
          facts: [
            "Life-cycle accounting tracks carbon from growth to products and end-use.",
            "Using wood in place of more carbon-intensive materials increases the benefit."
          ]
        },
        avoided: {
          title: "Avoided Agricultural Emissions",
          text:
            "When land moves from livestock to forest, methane and nitrous oxide emissions fall because animal numbers decline. AFFOR counts this along with in-forest sequestration.",
          facts: [
            "Each hectare of unthinned Sitka offsets ~3.97 livestock units on average (≈2.34–4.13 depending on soil).",
            "Combining sequestration + avoided emissions = the ‘double carbon dividend’."
          ]
        }
      };
      
      const cards = document.querySelectorAll("#carbon-impact .card");
      const panel = document.querySelector("#detail");
      const placeholder = panel.querySelector(".placeholder");
      const content = panel.querySelector(".content");
      const h3 = document.getElementById("detail-title");
      const p = document.getElementById("detail-text");
      const ul = document.getElementById("detail-facts");
      
      function showDetail(key, btn){
        const d = DETAIL[key];
        if(!d) return;
        h3.textContent = d.title;
        p.textContent = d.text;
        ul.innerHTML = "";
        d.facts.forEach(f => {
          const li = document.createElement("li");
          li.textContent = f;
          ul.appendChild(li);
        });
        placeholder.hidden = true;
        content.hidden = false;
      
        cards.forEach(c=>c.setAttribute("aria-expanded","false"));
        if(btn) btn.setAttribute("aria-expanded","true");
      }
      
      cards.forEach(btn=>{
        const key = btn.dataset.key;
        btn.addEventListener("mouseenter", ()=>showDetail(key, btn));
        btn.addEventListener("focus", ()=>showDetail(key, btn));
        btn.addEventListener("click", ()=>showDetail(key, btn));
        btn.addEventListener("keydown", (e)=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); showDetail(key, btn);} });
      });
      </script>
      

    </section>

    <!-- ====== Interactive Carbon Chart ====== -->
    <section id="carbon-curve" class="carbon-section">
      <h3 class="chart-title">Livewood and HWP Carbon Sequestration (Unthinned Sitka Spruce, YC20)</h3>
      <p class="chart-sub">
        Differential carbon sequestration over 200 years in above- and below-ground livewood, harvested wood products, and litter & mortality.
      </p>
    
      <div class="chart-wrap">
        <canvas id="carbonChart" aria-label="Carbon stocks chart" role="img"></canvas>
      </div>
    
      <div id="carbonCaption" class="chart-caption">
        Tip: move your cursor along the chart to see annual values and a short explanation.
      </div>
    </section>
    
    <style>
      .carbon-section {
        background: #ffffff; border: 1px solid #b9d7c7; border-radius: 14px;
        padding: clamp(16px,2vw,24px); box-shadow: 0 6px 18px rgba(3,51,30,.06);
        margin-top: 24px;
      }
      .chart-title { margin: 0 0 6px; color: #0e6b3a; }
      .chart-sub { margin: 0 0 10px; color: #4a5d55; }
      .chart-wrap { position: relative; width: 100%; max-width: 980px; margin: 0 auto; }
      .chart-caption { margin-top: 10px; color: #2a3a34; font-size: .95rem; }
    </style>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    
    <script>
      (function(){
        // === AFFOR Figure1.xlsx — Unthinned Sitka (YC20), first 200 years ===
        const years = [
          2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025, 2026, 2027, 2028, 2029, 2030, 2031, 2032, 2033, 2034,
          2035, 2036, 2037, 2038, 2039, 2040, 2041, 2042, 2043, 2044, 2045, 2046, 2047, 2048, 2049, 2050, 2051, 2052, 2053, 2054,
          2055, 2056, 2057, 2058, 2059, 2060, 2061, 2062, 2063, 2064, 2065, 2066, 2067, 2068, 2069, 2070, 2071, 2072, 2073, 2074,
          2075, 2076, 2077, 2078, 2079, 2080, 2081, 2082, 2083, 2084, 2085, 2086, 2087, 2088, 2089, 2090, 2091, 2092, 2093, 2094,
          2095, 2096, 2097, 2098, 2099, 2100, 2101, 2102, 2103, 2104, 2105, 2106, 2107, 2108, 2109, 2110, 2111, 2112, 2113, 2114,
          2115, 2116, 2117, 2118, 2119, 2120, 2121, 2122, 2123, 2124, 2125, 2126, 2127, 2128, 2129, 2130, 2131, 2132, 2133, 2134,
          2135, 2136, 2137, 2138, 2139, 2140, 2141, 2142, 2143, 2144, 2145, 2146, 2147, 2148, 2149, 2150, 2151, 2152, 2153, 2154,
          2155, 2156, 2157, 2158, 2159, 2160, 2161, 2162, 2163, 2164, 2165, 2166, 2167, 2168, 2169, 2170, 2171, 2172, 2173, 2174,
          2175, 2176, 2177, 2178, 2179, 2180, 2181, 2182, 2183, 2184, 2185, 2186, 2187, 2188, 2189, 2190, 2191, 2192, 2193, 2194,
          2195, 2196, 2197, 2198, 2199, 2200, 2201, 2202, 2203, 2204, 2205, 2206, 2207, 2208, 2209, 2210, 2211, 2212, 2213, 2214
        ];
    
        // Livewood (Above Ground) NT
        const ag = [
          0, 0.1, 0.1, 0.2, 0.4, 0.69, 1.19, 2.08, 3.56, 6.04, 10.3, 17.42, 29.6, 49.7, 82.36, 83.16, 103.94, 124.73, 145.52, 166.31,
          187.1, 211.65, 236.2, 260.75, 285.3, 309.85, 335.59, 361.33, 387.07, 412.81, 438.54, 463.29, 488.04, 512.79, 537.54, 562.29,
          585.25, 608.22, 631.19, 654.15, 677.12, 698.11, 0, 0.1, 0.1, 0.2, 0.4, 0.69, 1.19, 2.08, 3.56, 6.04, 10.3, 17.42, 29.6, 49.7,
          82.36, 83.16, 103.94, 124.73, 145.52, 166.31, 187.1, 211.65, 236.2, 260.75, 285.3, 309.85, 335.59, 361.33, 387.07, 412.81,
          438.54, 463.29, 488.04, 512.79, 537.54, 562.29, 585.25, 608.22, 631.19, 654.15, 0, 0.1, 0.1, 0.2, 0.4, 0.69, 1.19, 2.08, 3.56,
          6.04, 10.3, 17.42, 29.6, 49.7, 82.36, 83.16, 103.94, 124.73, 145.52, 166.31, 187.1, 211.65, 236.2, 260.75, 285.3, 309.85,
          335.59, 361.33, 387.07, 412.81, 438.54, 463.29, 488.04, 512.79, 537.54, 562.29, 585.25, 608.22, 631.19, 654.15, 677.12, 0,
          0.1, 0.1, 0.2, 0.4, 0.69, 1.19, 2.08, 3.56, 6.04, 10.3, 17.42, 29.6, 49.7, 82.36, 83.16, 103.94, 124.73, 145.52, 166.31, 187.1,
          211.65, 236.2, 260.75, 285.3, 309.85, 335.59, 361.33, 387.07, 412.81, 438.54, 463.29, 488.04, 512.79, 537.54, 562.29, 585.25,
          608.22, 631.19, 654.15, 677.12, 698.11, 0, 0.1, 0.1, 0.2, 0.4, 0.69, 1.19, 2.08, 3.56, 6.04, 10.3, 17.42, 29.6, 49.7, 82.36,
          83.16, 103.94, 124.73, 145.52, 166.31, 187.1, 211.65, 236.2, 260.75, 285.3, 309.85, 335.59, 361.33, 387.07, 412.81, 438.54,
          463.29, 488.04, 512.79, 537.54, 562.29, 585.25, 608.22, 631.19, 654.15
        ];
    
        // Livewood (Below Ground) NT
        const bg = [
          0, 0.03, 0.03, 0.06, 0.09, 0.13, 0.19, 0.3, 0.47, 0.75, 1.24, 2.04, 3.43, 5.66, 9.24, 4.64, 10.19, 12.05, 14.2, 16.59,
          19.18, 22.71, 25.09, 27.71, 30.53, 33.52, 36.89, 40.17, 43.59, 47.13, 50.76, 54.27, 58.04, 61.84, 65.69, 69.56, 73.11,
          76.99, 80.86, 84.72, 88.56, 92, 108.62, 93.41, 80.37, 69.16, 59.52, 51.27, 44.22, 38.24, 33.22, 29.16, 26.04, 24.05,
          23.37, 24.46, 17.71, 21.4, 21.68, 23.65, 25.23, 27.87, 29.5, 31.46, 33.71, 36.21, 39.16, 42.08, 45.18, 48.43, 51.83,
          55.13, 58.72, 62.36, 66.07, 69.82, 73.11, 76.99, 80.86, 84.72, 92, 108.62, 93.41, 80.37, 69.16, 59.52, 51.27, 44.05,
          37.94, 32.73, 28.3, 24.61, 21.62, 19.35, 17.93, 17.55, 17.24, 18.29, 19.5, 21.07, 22.96, 24.59, 26.55, 28.8, 31.3,
          34.01, 36.93, 40.03, 42.08, 45.18, 48.43, 51.83, 55.13, 58.72, 62.36, 66.07, 69.82, 73.11, 76.99, 80.86, 92, 108.62,
          93.41, 80.37, 69.16, 59.52, 51.27, 44.22, 38.24, 33.22, 29.16, 26.04, 24.05, 23.37, 24.46, 17.71, 21.4, 21.68, 23.65,
          25.23, 27.87, 29.5, 31.46, 33.71, 36.21, 39.16, 42.08, 45.18, 48.43, 51.83, 55.13, 58.72, 62.36, 66.07, 69.82, 73.11,
          76.99, 80.86
        ];
    
        // Harvested Wood Products NT
        const hwp = [
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
          0, 255.84, 249.88, 238.37, 232.82, 227.41, 222.12, 216.97, 211.93, 207.01, 202.22, 197.53, 192.96, 188.49, 184.14, 179.88,
          175.73, 171.67, 167.72, 163.85, 160.08, 156.39, 152.8, 149.29, 145.86, 142.51, 139.24, 136.05, 132.93, 129.89, 126.92,
          124.02, 121.18, 118.41, 115.71, 113.07, 110.5, 107.98, 105.52, 103.12, 100.78, 98.49, 352.1, 343.95, 335.99, 328.23, 320.65,
          313.24, 306.02, 298.96, 292.08, 285.35, 278.79, 272.38, 266.12, 260.01, 254.04, 248.21, 242.52, 236.97, 231.55, 226.25,
          221.08, 216.03, 211.1, 206.28, 201.58, 196.99, 192.5, 188.12, 183.84, 179.66, 175.58, 171.6, 389.28, 380.31, 371.55,
          363, 354.65, 346.5, 338.54, 330.77, 323.18, 315.77, 308.54, 301.48, 294.58, 287.84, 281.27, 274.85, 268.57, 262.45, 256.47,
          250.63, 244.92, 239.35, 233.91, 228.6, 223.41, 218.34, 213.39, 208.56, 203.83, 199.22, 194.72, 403.99, 394.71, 385.64,
          376.78, 368.14, 359.7, 351.45, 343.4, 335.55, 327.87, 320.38, 313.06, 305.91, 298.94, 292.12, 285.47, 278.97, 272.62, 266.42,
          260.37, 254.46, 248.68, 243.04, 237.53, 232.15, 226.9, 221.77, 216.75, 211.86, 207.08, 202.4
        ];
    
        // Litter & Mortality and Harvest Losses NT
        const litter = [
          0.01, 0.03, 0.04, 0.05, 0.07, 0.09, 0.12, 0.17, 0.25, 0.39, 0.61, 0.99, 1.64, 2.71, 4.48, 6.03, 7.9, 10.04, 12.43, 15.02,
          17.8, 20.18, 22.8, 25.62, 28.61, 31.74, 35.03, 38.45, 41.98, 45.61, 49.32, 53.09, 56.89, 60.74, 64.61, 68.51, 72.4, 76.27,
          80.12, 83.97, 87.8, 91.58, 108.6, 93.41, 80.35, 69.12, 59.46, 51.17, 44.05, 37.94, 32.73, 28.3, 24.61, 21.62, 19.35, 17.93,
          17.55, 17.24, 18.29, 19.5, 21.07, 22.96, 24.59, 26.55, 28.8, 31.3, 34.01, 36.93, 40.03, 43.29, 46.68, 50.18, 53.77, 57.41,
          61.12, 64.87, 68.51, 72.4, 76.27, 80.12, 83.97, 108.6, 93.41, 80.35, 69.12, 59.46, 51.17, 44.05, 37.94, 32.73, 28.3, 24.61,
          21.62, 19.35, 17.93, 17.55, 17.24, 18.29, 19.5, 21.07, 22.96, 24.59, 26.55, 28.8, 31.3, 34.01, 36.93, 40.03, 42.08, 45.18,
          48.43, 51.83, 55.13, 57.41, 61.12, 64.87, 68.51, 72.4, 76.27, 80.12, 83.97, 108.6, 93.41, 80.35, 69.12, 59.46, 51.17, 44.05,
          37.94, 32.73, 28.3, 24.61, 21.62, 19.35, 17.93, 17.55, 17.24, 18.29, 19.5, 21.07, 22.96, 24.59, 26.55, 28.8, 31.3, 34.01,
          36.93, 40.03, 43.29, 46.68, 50.18, 53.77
        ];
    
        // hasat yılları (AG keskin düşüşleri)
        const harvestYears = [2057, 2099, 2141, 2183];
    
        const ctx = document.getElementById('carbonChart').getContext('2d');
        const chart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: years,
            datasets: [
              { label: 'Livewood (Above Ground) NT', data: ag, borderColor: '#101010', borderWidth: 2.5, fill: false, tension: 0 },
              { label: 'Livewood (Below Ground) NT', data: bg, borderColor: '#101010', borderDash: [6,6], borderWidth: 2, fill: false, tension: 0 },
              { label: 'Harvested Wood Products NT', data: hwp, borderColor: '#101010', borderDash: [2,5], borderWidth: 2, fill: false, tension: 0 },
              { label: 'Litter & Mortality and Harvest Losses NT', data: litter, borderColor: '#101010', borderDash: [1,4], borderWidth: 1.5, fill: false, tension: 0 }
            ]
          },
          options: {
            responsive: true,
            interaction: { mode: 'index', intersect: false },
            plugins: {
              legend: { position: 'top' },
              tooltip: {
                callbacks: {
                  footer: (items) => {
                    const total = items.reduce((s, i) => s + i.parsed.y, 0);
                    return `Total: ${total.toFixed(1)} tCO₂e/ha`;
                  }
                }
              }
            },
            scales: {
              x: {
                title: { display: true, text: 'Year' },
                ticks: { autoSkip: true, maxTicksLimit: 10 },
                grid: {
                  color: (ctx) => {
                    const x = Number(ctx.tick.label);
                    return harvestYears.includes(x) ? '#0e6b3a55' : '#e6efe9';
                  },
                  borderDash: (ctx) => {
                    const x = Number(ctx.tick.label);
                    return harvestYears.includes(x) ? [4,4] : [];
                  }
                }
              },
              y: {
                title: { display: true, text: 'tCO₂e per ha (stock)' },
                beginAtZero: true,
                suggestedMax: 720,
                grid: { color: '#e6efe9' }
              }
            },
            elements: {
              point: { radius: 0, hitRadius: 8 },
              line:  { tension: 0 }
            }
          }
        });
    
        // caption
        const caption = document.getElementById('carbonCaption');
        function updateCaption(i){
          const yr = years[i];
          const total = (ag[i]||0) + (bg[i]||0) + (hwp[i]||0) + (litter[i]||0);
          let note = `Year ${yr} — AG: ${(ag[i]||0).toFixed(1)}, BG: ${(bg[i]||0).toFixed(1)}, HWP: ${(hwp[i]||0).toFixed(1)}, Litter: ${(litter[i]||0).toFixed(1)} tCO₂e/ha (Total ${total.toFixed(1)}).`;
          if (harvestYears.includes(yr)) note += ' Harvest year: AG drops; part of removed carbon enters HWP; BG and litter adjust.';
          caption.textContent = note;
        }
        document.getElementById('carbonChart').addEventListener('mousemove', (evt)=>{
          const pts = chart.getElementsAtEventForMode(evt, 'index', {intersect:false}, false);
          if(pts.length) updateCaption(pts[0].index);
        });
        document.getElementById('carbonChart').addEventListener('mouseleave', ()=>{
          caption.textContent = 'Tip: move your cursor along the chart to see annual values and a short explanation.';
        });
        updateCaption(0);
      })();
    </script>
    
    
  

 <section id="forest-biodiversity" class="fbx-section" aria-labelledby="fbx-title">
  <header class="fbx-head">
    <h2 id="fbx-title">Forest Biodiversity Explorer</h2>
    <p class="fbx-lead">
      Explore how biodiversity varies by <strong>species</strong>, <strong>soil</strong>, <strong>stage</strong> and <strong>management</strong>.
      Broadleaves (Birch, Oak) tend to score higher than Sitka spruce; scores are lowest at canopy closure and improve after thinning. Soils strongly moderate outcomes.
    </p>
  </header>

  <div class="fbx-controls" role="group" aria-label="Selectors">
    <label class="fbx-field">Species
      <select id="species" aria-label="Species">
        <option value="spruce">Sitka Spruce</option>
        <option value="birch">Birch</option>
        <option value="oak">Oak</option>
      </select>
    </label>

    <label class="fbx-field">Soil
      <select id="soil" aria-label="Soil">
        <option value="brown">Brown Earth</option>
        <option value="podzolic">Podzolic</option>
        <option value="gley">Gley</option>
        <option value="peat">Peat</option>
      </select>
    </label>

    <label class="fbx-field">Stage
      <select id="stage" aria-label="Stage">
        <option value="open">Open</option>
        <option value="canopy">Canopy Closure</option>
        <option value="mature">Mature</option>
      </select>
    </label>

    <label class="fbx-field">Management
      <select id="management" aria-label="Management">
        <option value="thinned">Thinned</option>
        <option value="unthinned">Unthinned</option>
      </select>
    </label>
  </div>

  <div class="fbx-result" id="biodiversity-result" role="status" aria-live="polite">
    <div class="fbx-badge" id="score-badge">–</div>
    <div class="fbx-text">
      <div class="fbx-title" id="result-title">Select options to see biodiversity outcome</div>
      <p class="fbx-desc" id="result-desc">
        Choose a species, soil, stage and management to view an indicative biodiversity level and explanation.
      </p>
      <ul class="fbx-legend" aria-label="Legend">
        <li><span class="lv lv1"></span> Very Low</li>
        <li><span class="lv lv2"></span> Low</li>
        <li><span class="lv lv3"></span> Moderate</li>
        <li><span class="lv lv4"></span> High</li>
        <li><span class="lv lv5"></span> Very High</li>
      </ul>
    </div>
  </div>

  <footer class="fbx-foot">
    <small>
      Based on AFFOR’s Delphi-based biodiversity module (flora, invertebrates, vertebrates) across species × soil × stage × management.
    </small>
  </footer>
</section>

<style>
/* ========== Layout & Aesthetics ========== */
.fbx-section{
  --ink:#0b2b1e; --muted:#4a5d55; --brand:#0e6b3a; --ring:#6bd3a3; --bord:#cfe3d6;
  --bg:#ffffff; --panel:#f5faf7;
  max-width: 980px; margin: 56px auto; padding: 22px clamp(16px,2vw,28px);
  background: var(--bg); border:1px solid var(--bord); border-radius:16px;
  box-shadow: 0 8px 22px rgba(3,51,30,.06);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.fbx-head h2{ color:var(--brand); margin:0 0 6px; letter-spacing:.2px; }
.fbx-lead{ color:var(--muted); margin:0; }

.fbx-controls{
  display:grid; gap:14px; grid-template-columns: repeat(2, minmax(0,1fr));
  margin:18px 0 10px;
}
@media (min-width:800px){ .fbx-controls{ grid-template-columns: repeat(4, minmax(0,1fr)); } }

.fbx-field{ display:flex; flex-direction:column; gap:6px; color:var(--ink); font-weight:600; }
.fbx-field select{
  appearance:none; padding:10px 12px; border:1px solid var(--bord); border-radius:10px;
  background: var(--panel); color:var(--ink); font-weight:500;
  transition:border .18s ease, box-shadow .18s ease, background .18s ease;
}
.fbx-field select:focus{ outline:none; border-color:var(--ring); box-shadow:0 0 0 3px color-mix(in oklab, var(--ring) 28%, white); background:#fff; }

/* Result panel */
.fbx-result{
  display:grid; grid-template-columns: 110px 1fr; gap:14px; align-items:center;
  margin-top:12px; padding:16px; border:1.5px solid var(--bord); border-radius:14px; background:#f0f7f3;
}
.fbx-badge{
  width:100px; height:100px; border-radius:14px; display:grid; place-items:center;
  font-weight:800; font-size:1.05rem; color:#fff; background:#a0b5ac;
}
.fbx-text .fbx-title{ font-weight:800; color:var(--ink); margin-bottom:2px; }
.fbx-text .fbx-desc{ color:var(--muted); margin:.25rem 0 .5rem; }
.fbx-legend{ display:flex; flex-wrap:wrap; gap:12px; padding:0; margin:0; list-style:none; color:var(--muted); font-size:.9rem; }
.lv{ display:inline-block; width:14px; height:14px; border-radius:4px; margin-right:6px; vertical-align:middle; }
.lv1{ background:#c7d6cf; } .lv2{ background:#93b3a4; } .lv3{ background:#5a927e; }
.lv4{ background:#2d795f; } .lv5{ background:#0e6b3a; }

.fbx-foot{ margin-top:10px; color:var(--muted); }

/* Score color classes */
.badge-vl{ background:#c7d6cf; } /* very low */
.badge-l { background:#93b3a4; }
.badge-m { background:#5a927e; }
.badge-h { background:#2d795f; }
.badge-vh{ background:#0e6b3a; }
/* override: ensure background stays light */
#forest-biodiversity.fbx-section{
  background:#ffffff !important;   /* panel beyaz */
}

/* üst başlık (başlık ve açıklama) bantlarını şeffaf bırak */
#forest-biodiversity .fbx-head{
  background:transparent !important;
}

#forest-biodiversity .fbx-foot{
  background:transparent !important;
}

</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const el = (id)=>document.getElementById(id);
    const resultBox  = el("biodiversity-result");
    const badge      = el("score-badge");
    const titleEl    = el("result-title");
    const descEl     = el("result-desc");
  
    const speciesBase = { spruce:2, birch:4, oak:5 };
    const soilAdj     = { brown:1, podzolic:0, gley:-1, peat:-2 };
    const stageAdj    = { open:0, canopy:-2, mature:1 };
    const mgmtAdj     = { thinned:1, unthinned:0 };
  
    const labels = ["Very Low","Low","Moderate","High","Very High"];
    const badgeClass = ["badge-vl","badge-l","badge-m","badge-h","badge-vh"];
  
    function explain(species, soil, stage, mgmt){
      const bits = [];
      if(species==="oak") bits.push("native oak supports rich understorey and structural diversity");
      else if(species==="birch") bits.push("native birch promotes light and early-successional flora");
      else bits.push("Sitka spruce has lower understory diversity overall");
      if(soil==="peat") bits.push("peat soils limit species richness");
      else if(soil==="brown") bits.push("brown earths favour higher biodiversity");
      else if(soil==="gley") bits.push("gley soils constrain diversity in wetter conditions");
      if(stage==="canopy") bits.push("canopy closure reduces light");
      else if(stage==="mature") bits.push("mature structure increases niches");
      if(mgmt==="thinned") bits.push("thinning improves light and heterogeneity");
      return bits.join("; ") + ".";
    }
  
    function update(){
      const s  = el("species").value;
      const so = el("soil").value;
      const st = el("stage").value;
      const m  = el("management").value;
  
      let raw = (speciesBase[s] ?? 3) + (soilAdj[so] ?? 0) + (stageAdj[st] ?? 0) + (mgmtAdj[m] ?? 0);
      raw = Math.max(1, Math.min(5, raw));
      const idx = raw-1;
  
      badge.textContent = labels[idx];
      badge.className = "fbx-badge " + badgeClass[idx];
      const nice = {
        spruce:"Sitka Spruce", birch:"Birch", oak:"Oak",
        brown:"Brown Earth", podzolic:"Podzolic", gley:"Gley", peat:"Peat",
        open:"Open", canopy:"Canopy Closure", mature:"Mature",
        thinned:"Thinned", unthinned:"Unthinned"
      };
      titleEl.textContent = `${nice[s]} on ${nice[so]} • ${nice[st]} • ${nice[m]}`;
      descEl.textContent  = explain(s,so,st,m);
    }
  
    document.querySelectorAll("#forest-biodiversity select").forEach(sel=>{
      sel.addEventListener("change", update);
    });
    update();
  });
  </script>
  
  
    
    <section id="ag-biodiversity">
        <h2>Agricultural → Forest: Biodiversity Change (First 0–8 Years)</h2>
        <p>
          Explore how biodiversity is expected to change when grassland is planted with Sitka spruce, Birch, or Oak.
          Select a soil type to view % change estimates by farm system and grazing intensity.
        </p>
      
        <!-- Soil tabs -->
        <div class="soil-tabs" role="tablist" aria-label="Soil types">
          <button class="soil-tab active" data-soil="brown" role="tab" aria-selected="true">Brown Earth</button>
          <button class="soil-tab" data-soil="podzolic" role="tab" aria-selected="false">Podzolic</button>
          <button class="soil-tab" data-soil="gley" role="tab" aria-selected="false">Gley</button>
          <button class="soil-tab" data-soil="organic" role="tab" aria-selected="false">Organic</button>
        </div>
      
        <!-- Heatmap -->
        <div class="heatmap-wrap" aria-live="polite">
          <table class="heatmap">
            <thead>
              <tr>
                <th style="width:40%">Farm system &amp; grazing</th>
                <th>Sitka spruce</th>
                <th>Birch</th>
                <th>Oak</th>
              </tr>
            </thead>
            <tbody id="heatmap-body">
              <!-- JS fills rows -->
            </tbody>
          </table>
          <div class="legend">
            <span>↓ loss</span>
            <div class="grad"></div>
            <span>↑ gain</span>
          </div>
          <p class="footnote">
            Values shown are derived from AFFOR’s expert survey. Final medians will replace these values in the final model.
          </p>
          
        </div>
      </section>
      
      <style>
      #ag-biodiversity { max-width: 980px; margin: 48px auto; }
      #ag-biodiversity h2 { color: var(--green, #004225); margin-bottom: .5rem; }
      #ag-biodiversity p { color: #444; }
      
      .soil-tabs { display:flex; gap:8px; margin:16px 0 12px; flex-wrap:wrap; }
      .soil-tab {
        border: 2px solid var(--green, #004225);
        background:#fff; color:var(--green, #004225);
        padding:8px 14px; border-radius:999px; cursor:pointer; font-weight:600;
      }
      .soil-tab.active { background: var(--green, #004225); color:#fff; }
      
      .heatmap-wrap { background:#fff; border-radius:12px; box-shadow:0 0 15px rgba(0,66,37,.06); padding:16px; }
      .heatmap { width:100%; border-collapse:separate; border-spacing:0; }
      .heatmap thead th {
        text-align:left; background:#f6faf7; color:#1f3b2d; padding:10px;
        border-bottom:2px solid #cde7da;
      }
      .heatmap tbody td, .heatmap tbody th { padding:12px 10px; border-bottom:1px solid #eef3ef; }
      .heatmap tbody tr:last-child td, .heatmap tbody tr:last-child th { border-bottom:none; }
      
      .cell {
        text-align:center; font-weight:700; border-radius:8px; padding:10px;
        color:#0b1d14; min-width:110px;
      }
      .cell.small { font-weight:600; }
      
      .legend { display:flex; align-items:center; gap:8px; margin-top:10px; font-size:.9rem; color:#555; }
      .legend .grad {
        height:10px; width:160px; border-radius:999px; border:1px solid #cde7da;
        background: linear-gradient(90deg, #f7d9d9 0%, #fff6e5 35%, #e9f5ef 65%, #c9ebdd 100%);
      }
      .footnote { font-size:.85rem; color:#666; margin-top:8px; }
      
      .badge {
        display:inline-block; margin-left:6px; font-size:.75rem; font-weight:700;
        padding:2px 6px; border-radius:6px; background:#eef7f1; color:#2a6b4f;
      }
      </style>
      
      <script>
/* ==== DATA (aynen seninki) ==== */
const data = {
  brown: [
    { label:"Dairy/Beef — Highly stocked (>1.7 LU/ha)",
      sitka:"7.14 – 14.68%", birch:"47.14 – 37.84%", oak:"68.57 – 56.99%" }
  ],
  podzolic: [
    { label:"Dairy/Beef — Intensive/moderate (1.4–1.7 LU/ha)",
      sitka:"4.86 – 13.17%", birch:"36.43 – 33.75%", oak:"56.86 – 59.28%" }
  ],
  gley: [
    { label:"Beef/Sheep — Moderate (0.92–1.4 LU/ha)",
      sitka:"−22.14 – 29.56%", birch:"−4.29 – 22.25%", oak:"5.71 – 24.23%" }
  ],
  organic: [
    { label:"Beef — Extensive/low (0.10–0.92 LU/ha)",
      sitka:"−46.71 – 27.88%", birch:"−16.71 – 25.04%", oak:"−2.29 – 21.56%" },
    { label:"Sheep — Extensive/low (0.10–0.92 LU/ha)",
      sitka:"−45.00 – 27.08%", birch:"−13.57 – 28.83%", oak:"−0.14 – 23.63%" }
  ]
};

/* ==== Yardımcılar: aralık metnini sayıya çevir ==== */
// "−22.14 – 29.56%" gibi değerleri {min, max, mid, text} yapar
function toNumber(str){
  return parseFloat(String(str)
    .replace(/%/g,'')
    .replace(/\s+/g,'')
    .replace(/\u2212/g,'-') // unicode minus → -
  );
}
function parseRange(val){
  if (typeof val === 'number') return {min:val, max:val, mid:val, text:(val>=0?`+${val}`:val) + '%'};
  const s = String(val).trim();
  const parts = s.split(/[–—]/); // en/em dash
  if (parts.length === 2){
    const a = toNumber(parts[0]);
    const b = toNumber(parts[1]);
    return {min: Math.min(a,b), max: Math.max(a,b), mid:(a+b)/2, text:
            `${a>=0?`+${a}`:a}% – ${b>=0?`+${b}`:b}%`};
  }
  const x = toNumber(s);
  return {min:x, max:x, mid:x, text:(x>=0?`+${x}`:x)+'%'};
}

/* ==== Renk/rozet ==== */
function colorForMid(mid){
  // ±70’e göre ölçek (kırmızı → nötr → yeşil)
  const clamp = (v,min,max)=>Math.max(min,Math.min(max,v));
  const v = clamp(mid, -70, 70);
  if (v === 0) return "#fffdf7";
  if (v < 0){
    const t = Math.abs(v)/70;
    return `rgba(247, 217, 217, ${0.35 + 0.45*t})`;
  } else {
    const t = v/70;
    return `rgba(201, 235, 221, ${0.35 + 0.45*t})`;
  }
}
function badgeHTML(text){
  // text zaten “+7.14% – 14.68%” formatında
  return `<span class="badge">${text}</span>`;
}

/* ==== Tabloyu çiz ==== */
function renderSoil(soilKey){
  const body = document.getElementById("heatmap-body");
  body.innerHTML = "";
  (data[soilKey] || []).forEach(row => {
    const tr = document.createElement("tr");

    const th = document.createElement("th");
    th.textContent = row.label;
    tr.appendChild(th);

    ["sitka","birch","oak"].forEach(sp => {
      const td = document.createElement("td");
      const r  = parseRange(row[sp]);        // {min,max,mid,text}
      const bg = colorForMid(r.mid);
      td.innerHTML = `<div class="cell" style="background:${bg}">${badgeHTML(r.text)}</div>`;
      tr.appendChild(td);
    });

    body.appendChild(tr);
  });
}

/* ==== Başlangıç ve sekmeler ==== */
renderSoil("brown");
document.querySelectorAll(".soil-tab").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".soil-tab").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    document.querySelectorAll(".soil-tab").forEach(b=>b.setAttribute("aria-selected","false"));
    btn.setAttribute("aria-selected","true");
    renderSoil(btn.dataset.soil);
  });
});
</script>

<section id="project-outputs" class="outputs-section">
    <header class="outputs-head">
      <h2>Project Outputs</h2>
      <p>
        The AFFOR model provides new insights into the economics, climate impacts, and biodiversity outcomes 
        of afforestation in Ireland, supporting evidence-based policy for sustainable land use.
      </p>
    </header>
  
    <div class="outputs-grid">
      <div class="output-card">
        <div class="icon">💶</div>
        <h3>Economic Viability</h3>
        <p>
          Forestry is privately profitable on approximately one-third of Irish farms, based on timber revenues and afforestation subsidies. 
          When the climate value of carbon is included, the share of farms with positive social returns rises from about 47% at €32 per tCO₂ to nearly 97% at €100 per tCO₂, highlighting the transformative impact of carbon pricing on afforestation decisions.
        </p>
      </div>
  
      <div class="output-card">
        <div class="icon">🌍</div>
        <h3>Carbon & Climate</h3>
        <p>
          Each hectare of unthinned Sitka spruce offsets an average of ~3.97 livestock units (LU), with a range of ~2.34–4.13 LU depending on soil type and conditions. 
          Afforestation delivers a “double carbon dividend” by both sequestering carbon in live biomass, soils, and harvested wood products and avoiding agricultural emissions (CH₄ and N₂O) by displacing livestock production. 
          This dual benefit significantly enhances forestry’s role in Ireland’s national climate mitigation strategy.
        </p>
      </div>
  
      <div class="output-card">
        <div class="icon">🦋</div>
        <h3>Biodiversity</h3>
        <p>
          Native broadleaf species such as birch and oak generally support higher levels of biodiversity — including flora, invertebrates, and vertebrates — compared with Sitka spruce, particularly over the longer term. 
          Biodiversity scores tend to be lowest at the canopy-closure stage, when structural complexity is limited, but increase significantly following thinning, which enhances light penetration, understorey growth, and habitat diversity. 
          Soil type further moderates outcomes, with brown earths generally associated with higher biodiversity potential than peat soils.
        </p>
      </div>
  
      <div class="output-card">
        <div class="icon">📑</div>
        <h3>Policy Relevance</h3>
        <p>
          The AFFOR model integrates farm-level economic analysis, carbon accounting, and biodiversity assessment into a single evidence-based decision-support framework. It provides insights into where and under what conditions afforestation is most beneficial, guiding the design and targeting of policy incentives. 
          AFFOR directly informs the implementation of Ireland’s Climate Action Plan, the EU Green Deal, and the EU Forest Strategy, supporting policies that maximise afforestation’s contributions to climate mitigation, biodiversity enhancement, and rural development
        </p>
      </div>
    </div>
  </section>
  
  <style>
    
    .outputs-section{
  max-width:1100px; margin:60px auto; padding:30px 20px;
  background:#ffffff !important;   /* beyaz zorunlu */
  border-radius:16px; border:1px solid #d9eadd;
  box-shadow:0 8px 22px rgba(0,66,37,.06); text-align:center;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

.outputs-head{
  background:transparent !important;  /* koyu header’ı bastır */
  padding-bottom:10px;
  border-bottom:1px solid #e6f0eb;
}
.outputs-head h2{ color:#0e6b3a; margin-bottom:8px; }
.outputs-head p{ color:#4a5d55; margin:0 auto 26px; max-width:700px; font-size:1.05rem; }

.outputs-grid{
  display:grid; gap:20px;
  grid-template-columns:repeat(auto-fit, minmax(240px,1fr));
  justify-items:center;   /* tek kalan kartı ortalar */
}

.output-card{
  background:#f7fbf9; border:1.5px solid #cfe3d6; border-radius:14px;
  padding:20px; box-shadow:0 4px 12px rgba(0,66,37,.05);
  display:flex; flex-direction:column; align-items:center; text-align:center;
  transition:transform .2s ease, background .2s ease;
  width:100%; max-width:260px;  /* kartları aynı genişlikte yapar */
}
.output-card:hover{ background:#ecf6f1; transform:translateY(-3px); }
.output-card .icon{ font-size:2rem; margin-bottom:10px; }
.output-card h3{ margin:0 0 8px; color:#0b2b1e; font-size:1.1rem; }
.output-card p{ margin:0; color:#4a5d55; font-size:.95rem; line-height:1.4; }

  </style>
  

  </main>

  <footer>
    <p>&copy; 2025 AFFOR Project | <a href="https://www.linkedin.com/in/merve-kurt-14123b378/"> <b> <span style="color:white;">MERVE KURT</span></b> </a> </p>
  </footer>

</body>
</html>



